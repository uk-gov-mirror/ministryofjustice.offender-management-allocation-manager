<% content_for :switcher do %>
  <%= render '/layouts/prison_switcher' %>
<% end %>
<h1 class="govuk-heading-l">Manage your staff</h1>

<div class="govuk-tabs" data-module="govuk-tabs">
  <h2 class="govuk-tabs__title">Manage your staff</h2>

  <ul class="govuk-tabs__list" role='tablist'>
    <li class="govuk-tabs__list-item govuk-tabs__list-item--selected">
      <a class="govuk-tabs__tab" href="#active_probation_poms">
        Active Probation officer POMs (<%= @poms.count { |pom| %w[active unavailable].include?(pom.status) && pom.probation_officer? } %>)
      </a>
    </li>
    <li class="govuk-tabs__list-item">
      <a class="govuk-tabs__tab" href="#active_prison_poms">
        Active Prison officer POMs (<%= @poms.count { |pom| %w[active unavailable].include?(pom.status) && pom.prison_officer? } %>)
      </a>
    </li>
    <li class="govuk-tabs__list-item">
      <a class="govuk-tabs__tab" href="#inactive_poms">
        Inactive staff (<%= @poms.reject { |pom| %w[active unavailable].include? pom.status }.count %>)
      </a>
    </li>
  </ul>

  <section class="govuk-tabs__panel" id="active_probation_poms">
    <h2 class="govuk-heading-m">Active Probation officer POMs</h2>
    <%= render "poms_table", pom_type: 'probation', poms: @poms.select { |pom| %w[active unavailable].include? pom.status }.select(&:probation_officer?) %>
  </section>

  <section class="govuk-tabs__panel" id="active_prison_poms">
    <h2 class="govuk-heading-m">Active Prison officer POMs</h2>
    <%= render "poms_table", pom_type: 'prison', poms: @poms.select { |pom| %w[active unavailable].include? pom.status }.select(&:prison_officer?) %>
  </section>

  <section class="govuk-tabs__panel" id="inactive_poms">
    <h2 class="govuk-heading-m">Inactive staff</h2>
    <%= render "inactive_poms", poms: @poms.reject { |pom| %w[active unavailable].include? pom.status } %>
  </section>
</div>
